@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================================================================
   GLOBALS
   - Keep global styling minimal.
   - Page-level theme (blue glass gradients) is controlled in app/page.tsx.
   ========================================================================== */

html,
body {
  height: 100%;
}

body {
  margin: 0;
  background: transparent;
}

/* ==========================================================================
   LAYOUT SAFETY
   ========================================================================== */

#_next {
  min-height: 100%;
}

/* ==========================================================================
   MAP CONTAINER + MAPBOX CANVAS SAFETY
   ========================================================================== */

.map-container {
  width: 100%;
  height: 100%;
  min-height: 56vh;
  overflow: hidden;
}

@media (min-width: 1024px) {
  .map-container {
    min-height: 0;
    height: 100%;
  }
}

.map-container canvas,
.map-container .mapboxgl-canvas,
.map-container .mapboxgl-canvas-container,
.map-container .mapboxgl-map {
  width: 100% !important;
  height: 100% !important;
}

.map-container canvas {
  display: block;
  pointer-events: auto;
  touch-action: pan-x pan-y;
}

/* ==========================================================================
   MAPBOX POPUP — POPUP THEME (LOCKED / HARDENED)
   - Prevents "X drifting" / thin X / mid-header X
   - Prevents popup width weirdness
   ========================================================================== */

.mapboxgl-popup {
  /* Mapbox uses max-width on the wrapper; keep it reasonable but not restrictive */
  max-width: 420px !important;
}

/* Popup content sizing */
.mapboxgl-popup-content {
  position: relative; /* REQUIRED so the close button can anchor top-right */
  background: #1e1e1e;
  color: rgba(255, 255, 255, 0.92);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 14px;
  box-shadow: 0 18px 50px rgba(0, 0, 0, 0.55);

  padding: 12px 12px 10px 12px;

  /* width safety */
  min-width: 260px;
  max-width: 420px;
}

/* Titles & text */
.mapboxgl-popup-content h3 {
  margin: 0 0 6px 0;
  font-size: 14px;
  font-weight: 800;
  letter-spacing: 0.02em;
  color: rgba(253, 224, 71, 0.95);
}

.mapboxgl-popup-content p {
  margin: 0;
  font-size: 12px;
  line-height: 1.25rem;
  color: rgba(255, 255, 255, 0.86);
}

/* ✅ HARD RESET the close button so it never inherits app button styling */
.mapboxgl-popup-close-button {
  all: unset; /* this is the key "never drift again" move */
  position: absolute !important;
  top: 8px !important;
  right: 8px !important;
  z-index: 2 !important;

  width: 30px !important;
  height: 30px !important;

  display: flex !important;
  align-items: center !important;
  justify-content: center !important;

  cursor: pointer !important;
  user-select: none !important;

  /* Make the X thick and readable */
  font-size: 22px !important;
  font-weight: 900 !important;
  line-height: 1 !important;

  color: rgba(255, 255, 255, 0.85) !important;
  border-radius: 10px !important;
}

.mapboxgl-popup-close-button:hover {
  background: rgba(250, 204, 21, 0.18) !important;
  color: rgba(255, 255, 255, 0.95) !important;
}

/* Small screens: keep popup from overflowing too hard */
@media (max-width: 480px) {
  .mapboxgl-popup {
    max-width: calc(100vw - 28px) !important;
  }
  .mapboxgl-popup-content {
    max-width: calc(100vw - 28px) !important;
    min-width: 0;
  }
}

/* ==========================================================================
   NOTE:
   If you have custom marker CSS (home/kingpin icons) elsewhere, keep it there.
   globals.css should not control app-wide color themes.
   ========================================================================== */
