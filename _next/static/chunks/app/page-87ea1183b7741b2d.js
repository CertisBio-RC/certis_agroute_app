(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2791:(e,t,r)=>{Promise.resolve().then(r.bind(r,2212))},2212:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a=r(7437),l=r(2265),s=r(7719),i=r.n(s),n=r(357);i().accessToken="pk.eyJ1IjoiZG9jamJhaWxleTE5NzEiLCJhIjoiY21ld3lzZTNqMGQwdzJxb2lwNHpjcjNveiJ9.T2O5szdwL-O5nDF9BJmFnw";let c={Agronomy:{color:"#FFD700",outline:"#000"},"Grain/Feed":{color:"#228B22",outline:"#000"},"Office/Service":{color:"#1E90FF",outline:"#000"},Kingpin:{color:"#FF0000",outline:"#FFFF00"}};function d(e){let{selectedCategories:t,selectedStates:r,selectedSuppliers:s,selectedRetailers:c,onStatesLoaded:d,onRetailersLoaded:o,onRetailerSummary:x}=e,g=(0,l.useRef)(null),h=(0,l.useRef)(null);return(0,l.useEffect)(()=>{h.current||(h.current=new(i()).Map({container:g.current,style:"mapbox://styles/mapbox/satellite-streets-v12",center:[-98.5795,39.8283],zoom:3}),h.current.on("load",async()=>{try{var e,t,r,a;let l=await fetch(n.env.NEXT_PUBLIC_GEOJSON_URL||"/retailers.geojson"),s=await l.json(),i=new Set,c=new Set;for(let e of s.features){let t=null===(r=e.properties)||void 0===r?void 0:r.State,l=null===(a=e.properties)||void 0===a?void 0:a.Retailer;t&&i.add(t),l&&c.add(l)}let x=Array.from(i),g=Array.from(c);null==d||d(x.sort()),null==o||o(g.sort()),null===(e=h.current)||void 0===e||e.addSource("retailers",{type:"geojson",data:s}),null===(t=h.current)||void 0===t||t.addLayer({id:"retailers-layer",type:"circle",source:"retailers",paint:{"circle-radius":6,"circle-color":"#1d4ed8","circle-stroke-width":1,"circle-stroke-color":"#fff"}})}catch(e){console.error("Failed to load GeoJSON",e)}}))},[d,o]),(0,l.useEffect)(()=>{if(!h.current)return;let e=h.current.getSource("retailers");e&&fetch(n.env.NEXT_PUBLIC_GEOJSON_URL||"/retailers.geojson").then(e=>e.json()).then(a=>{let l={type:"FeatureCollection",features:a.features.filter(e=>{let a=e.properties||{},l=0===r.length||r.includes(a.State),i=0===c.length||c.includes(a.Retailer),n=0===t.length||t.includes(a.Category),d=0===s.length||s.includes(a.Supplier);return l&&i&&n&&d})};if(e.setData(l),x){let e=new Map;for(let t of l.features){var i,n;let r=(null===(i=t.properties)||void 0===i?void 0:i.State)||"Unknown",a=(null===(n=t.properties)||void 0===n?void 0:n.Retailer)||"Unknown",l="".concat(r,"-").concat(a);e.has(l)||e.set(l,{state:r,retailer:a,locations:0}),e.get(l).locations+=1}x(Array.from(e.values()).sort((e,t)=>e.state===t.state?e.retailer.localeCompare(t.retailer):e.state.localeCompare(t.state)))}})},[r,c,t,s,x]),(0,a.jsx)("div",{ref:g,className:"w-full h-full"})}var o=r(6648),x=r(4697),g=r(2873);let h=["Certis Biologicals","BASF","Bayer","Corteva","Syngenta"];function m(){let[e,t]=(0,l.useState)([]),[r,s]=(0,l.useState)([]),[i,n]=(0,l.useState)([]),[m,u]=(0,l.useState)([]),[p,b]=(0,l.useState)([]),[y,j]=(0,l.useState)([]),[f,N]=(0,l.useState)([]),[v,k]=(0,l.useState)(!1),w=e=>{n(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},C=e=>{u(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},S=e=>{b(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},F=e=>{j(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,a.jsxs)("div",{className:"flex h-screen w-screen relative",children:[(0,a.jsx)("button",{className:"absolute top-3 left-3 z-20 p-2 bg-gray-800 text-white rounded-md md:hidden",onClick:()=>k(!v),"aria-label":"Toggle sidebar",children:v?(0,a.jsx)(x.Z,{size:20}):(0,a.jsx)(g.Z,{size:20})}),(0,a.jsxs)("aside",{className:"fixed md:static top-0 left-0 h-full w-72 bg-gray-100 dark:bg-gray-900 p-4 border-r border-gray-300 dark:border-gray-700 overflow-y-auto z-10 transform transition-transform duration-300\n        ".concat(v?"translate-x-0":"-translate-x-full"," md:translate-x-0"),children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,a.jsx)(o.default,{src:"".concat("/certis_agroute_app","/certis-logo.png"),alt:"Certis Logo",width:180,height:60,priority:!0})}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Home Zip Code"}),(0,a.jsx)("input",{type:"text",placeholder:"Enter ZIP",className:"w-full p-2 rounded border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"State Filter"}),(0,a.jsxs)("div",{className:"flex space-x-2 mb-3",children:[(0,a.jsx)("button",{onClick:()=>{u([...e])},className:"px-2 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Select All"}),(0,a.jsx)("button",{onClick:()=>{u([])},className:"px-2 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Clear All"})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:e.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:m.includes(e),onChange:()=>C(e),className:"mr-1"}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:e})]},e))})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Retailer Filter"}),(0,a.jsx)("div",{className:"flex space-x-2 mb-3",children:(0,a.jsx)("button",{onClick:()=>{j([])},className:"px-2 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Clear All"})}),(0,a.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:r.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:y.includes(e),onChange:()=>F(e)}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:e})]},e))})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Categories"}),(0,a.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,a.jsx)("button",{onClick:()=>{n(Object.keys(c).filter(e=>"Kingpin"!==e))},className:"px-2 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Select All"}),(0,a.jsx)("button",{onClick:()=>{n([])},className:"px-2 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Clear All"})]}),(0,a.jsx)("ul",{className:"space-y-2",children:Object.entries(c).map(e=>{let[t,r]=e;return(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"filter-".concat(t),checked:i.includes(t),onChange:()=>w(t),className:"mr-2",disabled:"Kingpin"===t}),(0,a.jsxs)("label",{htmlFor:"filter-".concat(t),className:"flex items-center text-gray-700 dark:text-gray-300",children:[(0,a.jsx)("span",{className:"inline-block w-4 h-4 mr-2 rounded-full border",style:{backgroundColor:r.color,borderColor:r.outline||"#000"}}),t]})]},t)})}),(0,a.jsx)("p",{className:"mt-3 text-sm text-red-600 dark:text-yellow-400 font-semibold",children:"Kingpins are always visible (bright red, yellow border)."})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Supplier Filter"}),(0,a.jsx)("div",{className:"flex space-x-2 mb-3",children:(0,a.jsx)("button",{onClick:()=>{b([])},className:"px-2 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Clear All"})}),(0,a.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:h.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:p.includes(e),onChange:()=>S(e)}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:e})]},e))})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Channel Summary"}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{children:["Selected States (",m.length,"):"]})," ",m.length>0?m.join(", "):"None"]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{children:["Selected Retailers (",y.length,"):"]})," ",y.length>0?y.join(", "):"None"]}),f.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("strong",{children:"Retailer Locations:"}),(0,a.jsx)("ul",{className:"list-disc list-inside ml-2 mt-1 space-y-1",children:f.map((e,t)=>(0,a.jsxs)("li",{children:[e.state,", ",e.retailer," â€” ",e.locations," ","locations"]},t))})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Trip Optimization"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Collect points and optimize route"})]})]}),(0,a.jsx)("main",{className:"flex-1 relative",children:(0,a.jsx)(d,{selectedCategories:i,selectedStates:m,selectedSuppliers:p,selectedRetailers:y,onStatesLoaded:t,onRetailersLoaded:s,onRetailerSummary:N})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[415,758,130,215,744],()=>t(2791)),_N_E=e.O()}]);