(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2791:(e,r,t)=>{Promise.resolve().then(t.bind(t,2212))},2212:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var o=t(7437),n=t(2265),l=t(7719),i=t.n(l);i().accessToken="pk.eyJ1IjoiZG9jamJhaWxleTE5NzEiLCJhIjoiY21ld3lzZTNqMGQwdzJxb2lwNHpjcjNveiJ9.T2O5szdwL-O5nDF9BJmFnw";let a={Agronomy:{color:"#1f77b4"},"Agronomy/Grain":{color:"#1f77b4"},"Office/Service":{color:"#2ca02c"},Grain:{color:"#ffdd00",outline:"#000"},"Grain/Feed":{color:"#ffdd00",outline:"#000"},Distribution:{color:"#000000",outline:"#fff"},Feed:{color:"#9467bd"},Kingpin:{color:"#ff0000",outline:"#ffff00",size:10}};function c(e){let{selectedCategories:r}=e,t=(0,n.useRef)(null),l=(0,n.useRef)(null);return(0,n.useEffect)(()=>{l.current||(l.current=new(i()).Map({container:t.current,style:"mapbox://styles/mapbox/satellite-streets-v12",center:[-98,40],zoom:4}),l.current.on("load",()=>{console.log("âœ… Map loaded"),l.current.addSource("retailers",{type:"geojson",data:"data/retailers.geojson"}),l.current.addLayer({id:"retailer-points",type:"circle",source:"retailers",paint:{"circle-radius":["case",["==",["get","category"],"Kingpin"],10,6],"circle-color":["match",["get","category"],"Agronomy",a.Agronomy.color,"Agronomy/Grain",a["Agronomy/Grain"].color,"Office/Service",a["Office/Service"].color,"Grain",a.Grain.color,"Grain/Feed",a["Grain/Feed"].color,"Distribution",a.Distribution.color,"Feed",a.Feed.color,"Kingpin",a.Kingpin.color,"#aaaaaa"],"circle-stroke-width":["case",["==",["get","category"],"Kingpin"],2,["==",["get","category"],"Distribution"],2,["==",["get","category"],"Grain"],1,["==",["get","category"],"Grain/Feed"],1,0],"circle-stroke-color":["match",["get","category"],"Kingpin",a.Kingpin.outline||"#000","Distribution",a.Distribution.outline||"#000","Grain",a.Grain.outline||"#000","Grain/Feed",a["Grain/Feed"].outline||"#000","#000000"]}});let e=new(i()).Popup({closeButton:!1,closeOnClick:!1});l.current.on("mouseenter","retailer-points",r=>{var t;if(l.current.getCanvas().style.cursor="pointer",!(null===(t=r.features)||void 0===t?void 0:t.length))return;let o=r.features[0],{name:n,address:i,category:a}=o.properties;e.setLngLat(o.geometry.coordinates).setHTML("<strong>".concat(n,"</strong><br/>").concat(i,"<br/><em>").concat(a,"</em>")).addTo(l.current)}),l.current.on("mouseleave","retailer-points",()=>{l.current.getCanvas().style.cursor="",e.remove()})}))},[]),(0,n.useEffect)(()=>{if(l.current&&l.current.getLayer("retailer-points")){let e;e=0===r.length?null:["any",["in",["get","category"],["literal",r]],["==",["get","category"],"Kingpin"]],l.current.setFilter("retailer-points",e),console.log("\uD83D\uDD0E Applied filter:",e)}},[r]),(0,o.jsx)("div",{ref:t,className:"w-full h-full rounded-lg shadow-lg"})}var s=t(6648);function d(){let[e,r]=(0,n.useState)([]),t=e=>{r(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e])};return(0,o.jsxs)("div",{className:"flex h-screen w-screen",children:[(0,o.jsxs)("aside",{className:"w-64 bg-gray-100 dark:bg-gray-900 p-4 border-r border-gray-300 dark:border-gray-700 overflow-y-auto",children:[(0,o.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,o.jsx)(s.default,{src:"".concat("/certis_agroute_app","/certis-logo.png"),alt:"Certis Logo",width:180,height:60,priority:!0})}),(0,o.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Categories"}),(0,o.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,o.jsx)("button",{onClick:()=>{r(Object.keys(a))},className:"px-2 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Select All"}),(0,o.jsx)("button",{onClick:()=>{r([])},className:"px-2 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Clear All"})]}),(0,o.jsx)("ul",{className:"space-y-2",children:Object.entries(a).map(r=>{let[n,l]=r;return(0,o.jsxs)("li",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"filter-".concat(n),checked:e.includes(n),onChange:()=>t(n),className:"mr-2"}),(0,o.jsxs)("label",{htmlFor:"filter-".concat(n),className:"flex items-center text-gray-700 dark:text-gray-300",children:[(0,o.jsx)("span",{className:"inline-block w-4 h-4 mr-2 rounded-full border",style:{backgroundColor:l.color,borderColor:l.outline||"#000"}}),n]})]},n)})})]}),(0,o.jsx)("main",{className:"flex-1 relative",children:(0,o.jsx)(c,{selectedCategories:e})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[415,648,130,215,744],()=>r(2791)),_N_E=e.O()}]);