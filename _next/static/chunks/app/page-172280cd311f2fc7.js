(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2791:(e,t,r)=>{Promise.resolve().then(r.bind(r,2212))},2212:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var a=r(7437),s=r(2265),i=r(7719),o=r.n(i);o().accessToken="pk.eyJ1IjoiZG9jamJhaWxleTE5NzEiLCJhIjoiY21ld3lzZTNqMGQwdzJxb2lwNHpjcjNveiJ9.T2O5szdwL-O5nDF9BJmFnw";let n={Agronomy:{color:"#FFD700",outline:"#000"},"Grain/Feed":{color:"#228B22",outline:"#000"},Feed:{color:"#8B4513",outline:"#000"},"Office/Service":{color:"#1E90FF",outline:"#000"},Distribution:{color:"#FF8C00",outline:"#000"},Kingpin:{color:"#FF0000",outline:"#FFFF00"}},l=e=>{switch((e||"").trim().toLowerCase()){case"agronomy":return"agronomy";case"grain/feed":case"grainfeed":return"grainfeed";case"grain":return"grain";case"feed":return"feed";case"agronomy/grain":return"agronomy/grain";case"office/service":case"officeservice":return"officeservice";case"distribution":return"distribution";case"kingpin":return"kingpin";default:return(e||"").trim().toLowerCase()}},c=e=>{let t=l(e);return"agronomy/grain"===t?["agronomy","grain"]:"grainfeed"===t?["grain","feed"]:[t]},d=e=>{let t=c(e);return t.includes("agronomy")?"Agronomy":t.includes("grain")?"Grain/Feed":t.includes("feed")?"Feed":t.includes("officeservice")?"Office/Service":t.includes("distribution")?"Distribution":t.includes("kingpin")?"Kingpin":"Unknown"},p=e=>(e||"").toString().trim().toLowerCase(),u={chs:"CHS",winfield:"Winfield",helena:"Helena",rosens:"Rosens",growmark:"Growmark",iap:"IAP","wilbur-ellis":"Wilbur-Ellis"};function g(e){let t=(e||"").trim().toLowerCase();return u[t]?u[t]:e.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function x(e){return e?e.split(",").map(e=>e.trim()).filter(e=>e.length>0).map(g):[]}function m(e){let{selectedCategories:t,selectedStates:r,selectedSuppliers:i,selectedRetailers:l,onStatesLoaded:u,onRetailersLoaded:g,onSuppliersLoaded:m,onRetailerSummary:f,onAddStop:h,onRemoveStop:y,tripStops:b=[],tripMode:j="entered",onOptimizedRoute:v}=e,w=(0,s.useRef)(null),k=(0,s.useRef)(null),N="".concat("/certis_agroute_app","/data/retailers.geojson?cacheBust=").concat(Date.now());return(0,s.useEffect)(()=>{if(k.current)return;let e=new(o()).Map({container:w.current,style:"mapbox://styles/mapbox/satellite-streets-v12",center:[-98.5795,39.8283],zoom:4,projection:"mercator"});k.current=e,e.on("load",async()=>{try{var t,r,a,s;let c=await fetch(N),p=await c.json();for(let e of p.features)e.properties.DisplayCategory=d((null===(t=e.properties)||void 0===t?void 0:t.Category)||"");let f=new Set,y=new Set,b=new Set;for(let e of p.features){let t=null===(r=e.properties)||void 0===r?void 0:r.State,i=null===(a=e.properties)||void 0===a?void 0:a.Retailer,o=null===(s=e.properties)||void 0===s?void 0:s.Suppliers;t&&f.add(t),i&&y.add(i),x(o).forEach(e=>b.add(e))}null==u||u(Array.from(f).sort()),null==m||m(Array.from(b).sort()),null==g||g(Array.from(y).sort()),e.addSource("retailers",{type:"geojson",data:p}),e.addLayer({id:"retailers-layer",type:"circle",source:"retailers",paint:{"circle-radius":4,"circle-color":["match",["get","DisplayCategory"],"Agronomy",n.Agronomy.color,"Grain/Feed",n["Grain/Feed"].color,"Feed",n.Feed.color,"Office/Service",n["Office/Service"].color,"Distribution",n.Distribution.color,"#1d4ed8"],"circle-stroke-width":2,"circle-stroke-color":"#fff"},filter:["!=",["get","DisplayCategory"],"Kingpin"]}),e.addLayer({id:"kingpins-layer",type:"circle",source:"retailers",paint:{"circle-radius":7,"circle-color":n.Kingpin.color,"circle-stroke-width":2,"circle-stroke-color":n.Kingpin.outline},filter:["==",["get","DisplayCategory"],"Kingpin"]});let j=new(o()).Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});function i(e,t){let r=e.Retailer||"Unknown",a=e.Name||"",s=e.DisplayCategory||"N/A",i=a?"".concat(r," – ").concat(a):r,o=x(e.Suppliers).join(", ")||"N/A",n="add-stop-".concat(Math.random().toString(36).slice(2)),l="".concat(e.Address||"",", ").concat(e.City||"",", ").concat(e.State||""," ").concat(e.Zip||""),c='\n            <div style="font-size: 13px; width:360px; background:#1a1a1a; color:#f5f5f5;\n                        padding:6px; border-radius:4px; position:relative;">\n              <button id="'.concat(n,'"\n                style="position:absolute; top:4px; right:4px; padding:2px 6px;\n                       background:#166534; color:#fff; border:none; border-radius:3px;\n                       font-size:11px; cursor:pointer; display:flex; align-items:center; gap:4px; font-weight:600;">\n                <span style="background:#fff; color:#166534; border-radius:50%; width:14px; height:14px;\n                             display:flex; align-items:center; justify-content:center; font-size:11px; font-weight:bold;">\n                  +\n                </span>\n                Add to Trip\n              </button>\n              <strong>').concat(r,"</strong><br/>\n              <em>").concat(a,"</em><br/>\n              ").concat(e.Address||"","<br/>\n              ").concat(e.City||""," ").concat(e.State||""," ").concat(e.Zip||"","<br/>\n              <strong>Category:</strong> ").concat(s,"<br/>\n              Suppliers: ").concat(o,"\n            </div>\n          ");return setTimeout(()=>{let e=document.getElementById(n);e&&h&&(e.onclick=()=>h({label:i,address:l,coords:t}))},0),c}function l(t){e.on("mouseenter",t,t=>{var r,a,s;e.getCanvas().style.cursor="pointer";let o=null===(a=t.features)||void 0===a?void 0:null===(r=a[0].geometry)||void 0===r?void 0:r.coordinates.slice(),n=null===(s=t.features)||void 0===s?void 0:s[0].properties;o&&n&&j.setLngLat(o).setHTML(i(n,o)).addTo(e)}),e.on("mouseleave",t,()=>{e.getCanvas().style.cursor="",j.remove()}),e.on("click",t,t=>{var r,a,s;let n=null===(a=t.features)||void 0===a?void 0:null===(r=a[0].geometry)||void 0===r?void 0:r.coordinates.slice(),l=null===(s=t.features)||void 0===s?void 0:s[0].properties;n&&l&&new(o()).Popup({maxWidth:"none"}).setLngLat(n).setHTML(i(l,n)).addTo(e)})}l("retailers-layer"),l("kingpins-layer")}catch(e){console.error("Failed to load GeoJSON",e)}})},[N,u,g,m,h]),(0,s.useEffect)(()=>{if(!k.current)return;let e=k.current.getSource("retailers");e&&fetch(N).then(e=>e.json()).then(a=>{for(let e of a.features){var s;e.properties.DisplayCategory=d((null===(s=e.properties)||void 0===s?void 0:s.Category)||"")}let o={type:"FeatureCollection",features:a.features.filter(e=>{let a=e.properties||{};if("Kingpin"===a.DisplayCategory)return!0;let s=0===r.length||r.map(p).includes(p(a.State)),o=0===l.length||l.map(p).includes(p(a.Retailer)),n=0===t.length||t.includes(p(a.DisplayCategory)),c=x(a.Suppliers).map(p),d=0===i.length||i.map(p).some(e=>c.includes(e));return s&&o&&n&&d})};if(e.setData(o),f){let e=new Map;for(let t of o.features){let r=t.properties||{};if("Kingpin"===r.DisplayCategory)continue;let a=r.State||"Unknown",s=r.Retailer||"Unknown",i=x(r.Suppliers),o=c(r.Category||"");e.has(s)||e.set(s,{retailer:s,count:0,suppliers:[],categories:[],states:[]});let n=e.get(s);n.count+=1,a&&!n.states.includes(a)&&n.states.push(a),i.forEach(e=>{e&&!n.suppliers.includes(e)&&n.suppliers.push(e)}),o.forEach(e=>{e&&!n.categories.includes(e)&&n.categories.push(e)})}f(Array.from(e.values()))}if(g){let e=new Set;for(let t of a.features){let a=t.properties||{};"Kingpin"!==a.DisplayCategory&&(0===r.length||r.map(p).includes(p(a.State)))&&a.Retailer&&e.add(a.Retailer)}g(Array.from(e).sort())}})},[N,r,l,t,i,f,g]),(0,s.useEffect)(()=>{if(!k.current)return;let e=k.current;if(b.length<2){e.getLayer("trip-route")&&(e.removeLayer("trip-route"),e.removeSource("trip-route")),e.getLayer("trip-stops-circle")&&(e.removeLayer("trip-stops-circle"),e.removeSource("trip-stops")),e.getLayer("trip-stops-label")&&e.removeLayer("trip-stops-label");return}let t=b.map(e=>e.coords.join(",")).join(";");fetch("optimize"===j?"https://api.mapbox.com/optimized-trips/v1/mapbox/driving/".concat(t,"?geometries=geojson&roundtrip=false&source=first&destination=last&access_token=").concat(o().accessToken):"https://api.mapbox.com/directions/v5/mapbox/driving/".concat(t,"?geometries=geojson&access_token=").concat(o().accessToken)).then(e=>e.json()).then(t=>{var r,a,s,i;let o="optimize"===j?null===(a=t.trips)||void 0===a?void 0:null===(r=a[0])||void 0===r?void 0:r.geometry:null===(i=t.routes)||void 0===i?void 0:null===(s=i[0])||void 0===s?void 0:s.geometry;if(!o)return;e.getLayer("trip-route")&&(e.removeLayer("trip-route"),e.removeSource("trip-route")),e.addSource("trip-route",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:o,properties:{}}]}}),e.addLayer({id:"trip-route",type:"line",source:"trip-route",paint:{"line-color":"#1E90FF","line-width":4}});let n=[...b];"optimize"===j&&t.waypoints&&(n=[...t.waypoints].sort((e,t)=>e.waypoint_index-t.waypoint_index).map(e=>{let[t,r]=e.location;return b.find(e=>e.coords[0]===t&&e.coords[1]===r)||{label:e.name||"Stop",address:"",coords:[t,r]}})),v&&v(n);let l={type:"FeatureCollection",features:n.map((e,t)=>({type:"Feature",geometry:{type:"Point",coordinates:e.coords},properties:{order:t+1,label:e.label}}))};e.getLayer("trip-stops-circle")&&(e.removeLayer("trip-stops-circle"),e.removeLayer("trip-stops-label"),e.removeSource("trip-stops")),e.addSource("trip-stops",{type:"geojson",data:l}),e.addLayer({id:"trip-stops-circle",type:"circle",source:"trip-stops",paint:{"circle-radius":14,"circle-color":"#1E90FF","circle-stroke-color":"#ffffff","circle-stroke-width":3}}),e.addLayer({id:"trip-stops-label",type:"symbol",source:"trip-stops",layout:{"text-field":["get","order"],"text-size":12,"text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-anchor":"center"},paint:{"text-color":"#ffffff","text-halo-color":"#000000","text-halo-width":1}})}).catch(e=>console.error("Directions/Optimization API error:",e))},[b,j,v]),(0,a.jsx)("div",{ref:w,className:"w-full h-full"})}var f=r(6648),h=r(4697),y=r(2873);let b="pk.eyJ1IjoiZG9jamJhaWxleTE5NzEiLCJhIjoiY21ld3lzZTNqMGQwdzJxb2lwNHpjcjNveiJ9.T2O5szdwL-O5nDF9BJmFnw",j=e=>(e||"").toString().trim().toLowerCase(),v=e=>(e||"").toUpperCase(),w={agronomy:"Agronomy",grain:"Grain",feed:"Feed","grain/feed":"Grain/Feed","office/service":"Office/Service",officeservice:"Office/Service",distribution:"Distribution",kingpin:"Kingpin"};function k(){let[e,t]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[p,u]=(0,s.useState)([]),[g,x]=(0,s.useState)([]),[k,N]=(0,s.useState)([]),[C,S]=(0,s.useState)([]),[F,L]=(0,s.useState)(!1),[z,A]=(0,s.useState)([]),[O,R]=(0,s.useState)("entered"),[D,E]=(0,s.useState)([]),[T,_]=(0,s.useState)(""),[I,G]=(0,s.useState)(null),J=e=>{A(t=>t.filter((t,r)=>r!==e))},K=async()=>{if(T&&b)try{let e=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(T),".json?access_token=").concat(b,"&limit=1")),t=await e.json();if(t.features&&t.features.length>0){let[e,r]=t.features[0].center;G([e,r]);let a={label:"Home (".concat(T,")"),address:T,coords:[e,r]};A(e=>{let t=e.filter(e=>!e.label.startsWith("Home"));return[a,...t]})}}catch(e){console.error("Error geocoding ZIP:",e)}},M="optimize"===O&&D.length>0?D:z,U=e=>{let t=j(e);d(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},Z=e=>{let t=j(e);u(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},B=e=>{x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},H=e=>{let t=j(e);N(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},P=C.filter(e=>e.categories.includes("kingpin")||"kingpin"===j(e.retailer)),W=C.filter(e=>!e.categories.includes("kingpin")&&"kingpin"!==j(e.retailer));return(0,s.useMemo)(()=>0===p.length?r:C.filter(e=>e.states.some(e=>p.includes(j(e)))).map(e=>e.retailer).filter((e,t,r)=>r.indexOf(e)===t).sort(),[r,C,p]),(0,a.jsxs)("div",{className:"flex h-screen w-screen relative",children:[(0,a.jsx)("button",{className:"absolute top-3 left-3 z-20 p-2 bg-gray-800 text-white rounded-md md:hidden",onClick:()=>L(!F),"aria-label":"Toggle sidebar",children:F?(0,a.jsx)(h.Z,{size:20}):(0,a.jsx)(y.Z,{size:20})}),(0,a.jsxs)("aside",{className:"fixed md:static top-0 left-0 h-full w-96 bg-gray-100 dark:bg-gray-900 p-4 border-r border-gray-300 dark:border-gray-700 overflow-y-auto z-10 transform transition-transform duration-300\n        ".concat(F?"translate-x-0":"-translate-x-full"," md:translate-x-0"),children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,a.jsx)(f.default,{src:"".concat("/certis_agroute_app","/certis-logo.png"),alt:"Certis Logo",width:180,height:60,priority:!0})}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Home Zip Code"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:T,onChange:e=>_(e.target.value),placeholder:"Enter ZIP",className:"flex-1 p-2 rounded border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),(0,a.jsx)("button",{onClick:K,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Set"})]}),I&&(0,a.jsxs)("p",{className:"mt-2 text-sm text-green-600 dark:text-green-400",children:["Home set at ",T," ✔"]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"States"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,a.jsx)("button",{onClick:()=>u(e.map(j)),className:"px-2 py-1 bg-blue-600 text-white rounded text-xs",children:"Select All"}),(0,a.jsx)("button",{onClick:()=>u([]),className:"px-2 py-1 bg-gray-400 text-white rounded text-xs",children:"Clear"})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-1 text-sm",children:e.map(e=>{let t=j(e);return(0,a.jsxs)("label",{className:"flex items-center space-x-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:p.includes(t),onChange:()=>Z(e)}),(0,a.jsx)("span",{children:v(e)})]},e)})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Retailers"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,a.jsx)("button",{onClick:()=>N(r.map(j)),className:"px-2 py-1 bg-blue-600 text-white rounded text-xs",children:"Select All"}),(0,a.jsx)("button",{onClick:()=>N([]),className:"px-2 py-1 bg-gray-400 text-white rounded text-xs",children:"Clear"})]}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto text-sm",children:r.map(e=>{let t=j(e);return(0,a.jsxs)("label",{className:"flex items-center space-x-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:k.includes(t),onChange:()=>H(e)}),(0,a.jsx)("span",{children:e})]},e)})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Suppliers"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,a.jsx)("button",{onClick:()=>x(o),className:"px-2 py-1 bg-blue-600 text-white rounded text-xs",children:"Select All"}),(0,a.jsx)("button",{onClick:()=>x([]),className:"px-2 py-1 bg-gray-400 text-white rounded text-xs",children:"Clear"})]}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto text-sm",children:o.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:g.includes(e),onChange:()=>B(e)}),(0,a.jsx)("span",{children:e})]},e))})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Categories"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,a.jsx)("button",{onClick:()=>{d(Object.keys(n).filter(e=>"Kingpin"!==e).map(j))},className:"px-2 py-1 bg-blue-600 text-white rounded text-xs",children:"Select All"}),(0,a.jsx)("button",{onClick:()=>d([]),className:"px-2 py-1 bg-gray-400 text-white rounded text-xs",children:"Clear"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-1 text-sm",children:Object.entries(n).filter(e=>{let[t]=e;return"Kingpin"!==t}).map(e=>{let[t,{color:r}]=e,s=w[j(t)]||t;return(0,a.jsxs)("label",{className:"flex items-center space-x-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:c.includes(j(t)),onChange:()=>U(t)}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"inline-block w-3 h-3 rounded-full mr-1",style:{backgroundColor:r}}),s]})]},t)})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Channel Summary"}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-300 max-h-40 overflow-y-auto",children:[W.map((e,t)=>(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("strong",{children:[e.retailer," (",e.states.map(v).join(", "),")"]})," ","(",e.count," sites) ",(0,a.jsx)("br",{}),"Suppliers: ",e.suppliers.join(", ")||"N/A"," ",(0,a.jsx)("br",{}),"Categories:"," ",e.categories.map(e=>w[j(e)]||e).join(", ")||"N/A"]},t)),P.length>0&&(0,a.jsxs)("div",{className:"mt-2 text-red-600 dark:text-red-400",children:[(0,a.jsx)("strong",{children:"Kingpins:"})," ",P.map(e=>e.retailer).join(", ")]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Trip Optimization"}),(0,a.jsxs)("div",{className:"flex space-x-4 mb-3 text-sm",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-1 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",value:"entered",checked:"entered"===O,onChange:()=>R("entered")}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Map as Entered"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-1 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",value:"optimize",checked:"optimize"===O,onChange:()=>R("optimize")}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Optimize Route"})]})]}),z.length>0?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("ol",{className:"list-decimal ml-5 text-sm text-gray-700 dark:text-gray-300",children:z.map((e,t)=>(0,a.jsxs)("li",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:e.label}),(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.address})]}),t>0&&(0,a.jsx)("button",{onClick:()=>J(t),className:"ml-2 text-red-600 hover:text-red-800 text-xs",children:"❌"})]},t))}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 mt-3",children:[(0,a.jsx)("button",{onClick:()=>{},className:"px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700",children:"Build Route"}),M.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{href:function(e){if(e.length<2)return null;let t=encodeURIComponent(e[0].address),r=encodeURIComponent(e[e.length-1].address),a=e.slice(1,-1).map(e=>encodeURIComponent(e.address)).join("|");return"".concat("https://www.google.com/maps/dir/?api=1","&origin=").concat(t,"&destination=").concat(r).concat(a?"&waypoints=".concat(a):"")}(M)||"#",target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700 text-center",children:"Open in Google Maps"}),(0,a.jsx)("a",{href:function(e){if(e.length<2)return null;let t=encodeURIComponent(e[0].address),r=e.slice(1).map(e=>encodeURIComponent(e.address)).join("+to:");return"".concat("http://maps.apple.com/?dirflg=d","&saddr=").concat(t,"&daddr=").concat(r)}(M)||"#",target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 text-center",children:"Open in Apple Maps"}),(0,a.jsx)("button",{onClick:()=>{A([]),E([])},className:"px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",children:"Clear All"})]})]})]}):(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No stops added yet."})]})]}),(0,a.jsx)("main",{className:"flex-1 relative",children:(0,a.jsx)(m,{selectedCategories:c,selectedStates:p,selectedSuppliers:g,selectedRetailers:k,onStatesLoaded:t,onRetailersLoaded:i,onSuppliersLoaded:l,onRetailerSummary:S,onAddStop:e=>{z.some(t=>t.label===e.label&&t.address===e.address)||A(t=>[...t,e])},onRemoveStop:J,tripStops:z,tripMode:O,onOptimizedRoute:E})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[415,758,130,215,744],()=>t(2791)),_N_E=e.O()}]);